<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Combination Generator</title>
</head>
<body>
  <h1>Combination Generator</h1>

  <label for="startCombo">Enter the starting combination (e.g., AAC1): </label>
  <input type="text" id="startCombo" name="startCombo" required>
  <br><br>

  <label for="numCombinations">Enter the number of combinations to generate: </label>
  <input type="number" id="numCombinations" name="numCombinations" required>
  <br><br>

  <button onclick="generateCombinations()">Generate Combinations</button>
  <br><br>

  <textarea id="output" rows="10" cols="50" readonly></textarea>
  <button onclick="copyToClipboard(this)">Copy</button>

  <script>
    function generateCombinations() {
      const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const startCombo = document.getElementById('startCombo').value.toUpperCase();
      const numCombinationsInput = parseInt(document.getElementById('numCombinations').value);
      const comboLength = startCombo.length;

      const startIndex = findPosition(chars, startCombo);
      const maxCombo = chars[chars.length - 1].repeat(comboLength); // 'ZZZZ'
      const maxIndex = findPosition(chars, maxCombo);

      const remaining = maxIndex - startIndex;

      let numToGenerate = numCombinationsInput;
      if (numCombinationsInput > remaining + 1) {
        numToGenerate = remaining + 1;
        alert(`Only ${numToGenerate} combinations can be generated from ${startCombo} to '${maxCombo}'.`);
      }

      const combos = getCombinations(chars, startCombo, numToGenerate);
      document.getElementById('output').value = combos.join('\n');
    }

    function getCombinations(chars, start, num) {
      const length = start.length;
      const startIndex = findPosition(chars, start);
      const combinations = [];

      let currentIndex = startIndex;

      for (let i = 0; i < num; i++) {
        const combo = getCombination(chars, currentIndex, length);
        combinations.push(combo);
        currentIndex++;
      }

      return combinations;
    }

    function findPosition(chars, combo) {
      const base = chars.length;
      return [...combo].reverse().reduce((acc, char, index) =>
        acc + chars.indexOf(char) * (base ** index), 0);
    }

    function getCombination(chars, index, length) {
      const base = chars.length;
      let combo = '';

      for (let i = 0; i < length; i++) {
        combo = chars[index % base] + combo;
        index = Math.floor(index / base);
      }

      return combo;
    }

    function copyToClipboard(btn) {
      var copyText = btn.previousElementSibling;
      copyText.select();
      navigator.clipboard.writeText(copyText.value)
        .then(() => {
          alert("Copied to clipboard successfully");
        })
        .catch(err => {
          alert('Failed to copy: ' + err);
        });
    }
  </script>
</body>
</html>

